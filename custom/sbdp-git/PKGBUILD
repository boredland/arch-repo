# # Maintainer: Jonas Strassel (info@jonas-strassel.de)

_pkgname=sbdp
pkgname=$_pkgname-git
pkgver=r70.1eab2dc.20201231144337
pkgrel=1
pkgdesc='SwayBindsymDocsParser (sbdp) is a small Typescript for parsing keybinding hints in a compact form suitable for tiling window environments.'
url="https://github.com/boredland/sbdp"
arch=('any')
license=('MIT')
depends=('nodejs>=12.0.0')
makedepends=(
    'git'
    'npm>=5.0.0'
)
source=("${_pkgname}::git+${url}.git")
md5sums=("SKIP")

pkgver() {
    cd "$srcdir/$_gitname"
    printf "r%s.%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)" "$(date +"%Y%m%d%H%M%S")"
}

build() {
    cd "${srcdir}/${_pkgname}"
    npm i
    npm run build
}

package() {
    mkdir "${pkgdir}/usr"
    mkdir "${pkgdir}/usr/bin/"
    install -D -m 0755 "${srcdir}/${_pkgname}/dist/index.js" "${pkgdir}/usr/bin/sbdp"
}